
<project name="MIB Navigator" default="MIBNavigator:Jar" basedir=".">
    <description>
        Ant build file for the MIB Navigator application.
    </description>
	<property name="appName" value="MIBNavigator"/>
  
  <target name="MIBNavigator:Jar" description="Builds the MIB Navigator application.  Only required .class files are included.">
    <!-- Set the main class. -->
    <property name="mainClass" value="MIBNavigator"/>
    <property name="buildDir" value="build-navigator"/>
    <!-- Create the build directory -->
    <mkdir dir="${buildDir}"/>
  	<!-- Compile the java code from src into build -->
    <javac srcdir="src" destdir="${buildDir}" includes="${mainClass}.java"/>
  	<!-- Copy resource files into build -->
  	<copy todir="${buildDir}">
      <fileset dir="./src" includes="*.properties contextmenu/*.properties snmp/*.properties"/>
    </copy>
    <!-- Put everything in build into the ${appName}.jar file -->
    <jar jarfile="${appName}.jar" basedir="${buildDir}" manifest="${appName}.mf"/>
    <!-- Delete the build directory tree -->
    <delete dir="${buildDir}"/>
  </target>

  <target name="SNMPPackage" description="Build the independent SNMP package distribution.">
    <!-- Set the build directory -->
    <property name="buildDir" value="build_snmp"/>
    <!-- Create the build directory -->
    <mkdir dir="${buildDir}"/>
    <!-- Compile the java code from source into build -->
    <javac srcdir="src" destdir="${buildDir}" includes="snmp\*.java"/>
  	<copy todir="${buildDir}">
      <fileset dir="./src" includes="snmp/*.properties"/>
    </copy>
    <!-- Put everything in build into the snmp.jar file -->
    <jar jarfile="snmp.jar" basedir="${buildDir}"/>
    <!-- Delete the build directory tree -->
    <delete dir="${buildDir}"/> 
  </target>
	
  <target name="MIBNavigator:Source" description="Build the complete source distribution.">
	<!-- Zip up the source, manifest, and build file -->
    <zip destfile="mibnav-source.zip">
	  <fileset dir="." includes="src/**"/>
	  <fileset dir="." includes="build-navigator.xml MIBNavigator.mf AUTHORS LICENSE README mib.rng mib.xsd"/>
    </zip>
  </target>
	
  <target name="MIBNavigator:Release" description="Build the complete release package.">
  	<!-- Build the application jar first -->
    <antcall target="MIBNavigator:Jar"/>
	<property name="packageDir" value="mib-navigator"/>
	<mkdir dir="${packageDir}"/>
	<copy todir="${packageDir}">
      <fileset dir="." includes="MIBNavigator.jar license readme authors schema/* extra-xml-mibs/** mibs/smi/* mibs/xml/*xml" />
    </copy>
	<!-- Zip up everything -->
    <zip destfile="mib-navigator.zip">
	  <fileset dir="." includes="${packageDir}/**"/>
    </zip>
  	<delete file="${appName}.jar"/>
	<delete dir="${packageDir}"/>
  </target>
	
</project>
   
